<Page x:Class="U148.Uwp.Views.MainView"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      xmlns:behaviors="using:Microsoft.Toolkit.Uwp.UI.Animations.Behaviors"
      xmlns:core="using:Microsoft.Xaml.Interactions.Core"
      xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
      xmlns:fontAwesome="using:SoftwareKobo.Icons.FontAwesome"
      xmlns:interactivity="using:Microsoft.Xaml.Interactivity"
      xmlns:localControls="using:U148.Uwp.Controls"
      xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
      xmlns:views="using:U148.Uwp.Views"
      DataContext="{Binding Source={StaticResource Locator}, Path=Main}"
      mc:Ignorable="d">
    <Grid Background="{ThemeResource ApplicationPageBackgroundThemeBrush}">
        <SplitView x:Name="HamburgerMenu"
                   PaneBackground="Transparent">
            <SplitView.Pane>
                <Grid>
                    <Image Source="/Assets/Images/hamburger_menu_background.jpg"
                           Stretch="UniformToFill">
                        <interactivity:Interaction.Behaviors>
                            <behaviors:Blur Value="5"
                                            Duration="0" />
                        </interactivity:Interaction.Behaviors>
                    </Image>
                    <ScrollViewer VerticalScrollBarVisibility="Auto">
                        <Grid>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="*" />
                                <RowDefinition Height="Auto" />
                            </Grid.RowDefinitions>
                            <Image Source="{Binding Path=UserInfo.Icon}" />
                            <Button Height="48"
                                    HorizontalAlignment="Stretch"
                                    Command="{Binding Path=LogoutCommand}"
                                    Content="登出">
                                <interactivity:Interaction.Behaviors>
                                    <core:EventTriggerBehavior EventName="Click">
                                        <core:ChangePropertyAction PropertyName="IsPaneOpen"
                                                                   TargetObject="{Binding ElementName=HamburgerMenu}"
                                                                   Value="False" />
                                    </core:EventTriggerBehavior>
                                </interactivity:Interaction.Behaviors>
                            </Button>
                            <Button Height="48"
                                    HorizontalAlignment="Stretch"
                                    Click="LoginMenuItem_Click"
                                    Content="登录">
                                <interactivity:Interaction.Behaviors>
                                    <core:EventTriggerBehavior EventName="Click">
                                        <core:ChangePropertyAction PropertyName="IsPaneOpen"
                                                                   TargetObject="{Binding ElementName=HamburgerMenu}"
                                                                   Value="False" />
                                    </core:EventTriggerBehavior>
                                </interactivity:Interaction.Behaviors>
                            </Button>
                            <StackPanel Grid.Row="1"
                                        Orientation="Vertical">
                                <localControls:HamburgerMenuItem Label="设置">
                                    <localControls:HamburgerMenuItem.Icon>
                                        <SymbolIcon Symbol="Setting" />
                                    </localControls:HamburgerMenuItem.Icon>
                                </localControls:HamburgerMenuItem>
                                <localControls:HamburgerMenuItem Label="关于">
                                    <localControls:HamburgerMenuItem.Icon>
                                        <FontIcon FontFamily="Segoe MDL2 Assets"
                                                  Glyph="&#xE946;" />
                                    </localControls:HamburgerMenuItem.Icon>
                                </localControls:HamburgerMenuItem>
                                <Button Height="48"
                                        HorizontalAlignment="Stretch"
                                        Content="关于" />
                            </StackPanel>
                        </Grid>
                    </ScrollViewer>
                </Grid>
            </SplitView.Pane>
            <localControls:MasterDetailView>
                <localControls:MasterDetailView.MasterContent>
                    <Frame x:Name="MasterFrame"
                           SourcePageType="views:ArticleView" />
                </localControls:MasterDetailView.MasterContent>
                <localControls:MasterDetailView.DetailContent>
                    <Frame x:Name="DetailFrame"
                           SourcePageType="views:EmptyDetailView" />
                </localControls:MasterDetailView.DetailContent>
            </localControls:MasterDetailView>
        </SplitView>
    </Grid>
</Page>